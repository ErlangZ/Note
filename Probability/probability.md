#概率论[^1]
## 概率空间

1. 概率经典定义  
概率的经典定义，也被称为`先验概率`。如果一项随机实验可以产生$n$种互斥并且等可能的输出，其中$n_A$项
输出具有属性A，那么A的概率就是$n_A/n$。
2. 概率统计定义  
我们以某种分布进行一系列随机实验，事件A发生的概率可以通过这些事件发生的`相对频率`进行进行，这就是概率
的统计定义，也被称为`后验概率`。
3. 概率模型  
为了了解真实世界，我们一般会对真实世界建模，比如用一个公式$s=\frac{1}{2}gt^2$来描述一个事件。我们只要
知道了$g$,$t$就能准确的预测$s$。在概率论中，我们做了同样的事情,我们建立理想化模型来预测真实事件。
4. 样本空间  
样本空间定义为$\Omega$，是一项实验所有可能输出的集合。比如，我们投掷一个色子，$\Omega$就是$\{1,2,3,4,5,6\}$。
5. 事件和事件空间  
事件是样本空间的子集，一般用$A$来表示一个事件。比如投掷色子的实验，事件“色子得到3”可以描述为$A=\{3\}$；
事件“色子是偶数”可以描述为$A=\{2,4,6\}$。一项给定实验,所有事件$A$的种类，被成为`事件空间`。事件空间
一般都使用花体拉丁字符表示，比如$\mathcal{A}$。投色子实验，$\mathcal{A}$有$2^6=64$个元素，包括空集
$\phi$和全集$\Omega$。`原始事件`或者是`原子事件`，`简单事件`，是指事件只包含样本空间中的一个单个元素，
比如，掷色子实验中，“色子得到3”就是一个原始事件。
6. 函数和表征函数(Indicator Function)  
函数$f(\bullet)$是可以用集合的方式进行定义的。$f(\bullet)$是有序的二元组(a, b)的集合,其中,$a \in A$,
$b \in B$;每个$a\in A$的元素都是某个有序二元组的第一个元素，而$b \in B$则不是每个元素都必须出现；此外
，还必须没有任何两个有序二元组的第一个元素相同。A是定义域，B是值域。  
表征函数，假设$\Omega$是包含点$\omega$的任何一个空间，$A$是$\Omega$的子集。那么$A$的Indicator Function，
写成$I_A(\bullet)$，是一个以$\Omega$为定义域，值域由0,1两个整数构成的函数。
$$I_A(\omega) = \begin{cases} 1 \quad  \omega \in A  \\
                             0 \quad  \omega \notin A
                \end{cases}
$$
7. 概率函数  
概率函数$P[\bullet]$是一个集合函数，它的定义域是$\mathcal A$，值域是$[0,1]$, 描述了某项事件发生的概率。
满足如下定理：
    * $P[A] >= 0, A \in \mathcal A$
    * $P[\Omega] = 1$
    * 如果$A_1$,$A_2$,...,$A_n$是$\mathcal A$的一系列互斥事件，就是说$A_i \cap A_j = \phi$, 并且
      $A_i \cup A_j = \mathcal A$。那么, $P[\cup^{\infty}_{i=1}A_i]=\sum^{\infty}_{i=1}P[A_i]$  
概率函数$P[A]$读作事件A发生的概率。它具有如下的性质：
    $$P[\phi] = 0$$ 
    $$P[A] = 1 - P[\bar A]$$
如果$A \in \mathcal A$, $B \in \mathcal B$,那么$P[A] = P[AB] + P[A\bar{B}]$，此外$P[A-B]=P[A\bar{B}]=P[A]-P[AB]$
8. 概率空间  
概率空间是一个三元组($\Omega, \mathcal A, P[\bullet]$), $\Omega$是样本空间， $\mathbf A$是事件空间，
$P[\bullet]$是$\mathbf A$的概率函数。可以看到，这三个元素之间是相互关联的，$\mathbf A$是$\Omega$子集
的集合，$P[\bullet]$是以$\mathbf A$为定义域的函数。
9. 等可能概率函数  
$\omega_i$是有限空间$\Omega$内的某个样本点，如果概率函数同时满足两个条件,就是等可能的概率函数
    * $P[\{\omega_{1}\}] = P[\{\omega_{2}\}] = ... = P[\{\omega_{N}\}]$
    * 如果$A$是$\Omega$空间内有$N(A)$个样本点的子集，那么$P[A]=N(A)/N$
10. 条件概率  
假设A和B是给定样本空间$\mathcal A$中的两个事件。
$$ P[A|B] = \frac{P[AB]}{P[B]} $$
当然，这要求$P[B]>0$。如果$P[B]=0$，这种情况没有定义。  
11. 全概率公式(Total Probabily Theorem)  
对一个给定的概率空间$(\Omega,\mathcal{A},P[\bullet])$， 如果$B_1,B_2,...,B_n$是$\mathcal{A}$中一系列
互斥事件，并且，$\Omega=\cup_{i=1}^nB_i$，对$j=1,2,...n$都有$P[B_i] > 0$，那么对于任何一个$A \in \mathcal{A}$
中的事件，$$P[A]=\sum^n_{i=1}P[A|B_i]P[B_i]$$
12. 贝叶斯公式(Bayes' formula)  
对一个给定的概率空间$(\Omega,\mathcal{A},P[\bullet])$,如果$B_1,B_2,...,B_n$是$\mathcal{A}$中一系列
互斥事件，并且，$\Omega=\cup_{i=1}^nB_i$，对$j=1,2,...n$都有$P[B_i] > 0$，那么对于任何一个$A \in \mathcal{A}$，
都有
$$P[B_{k}|A] = \frac{P[A|B_{k}]P[B_{k}]}{\sum_{i=1}^{n}P[A|B_{i}]P[B_{i}]} $$
13. 乘法法则  
对一个给定的概率空间$(\Omega,\mathcal{A},P[\bullet])$,假设$A_1,A_2,...,A_n$是$\mathcal{A}$的事件，
$P[A_{1}...A_{n}] > 0$，
$$P[A_1A_2...An]=P[A_1]P[A_2|A1]P[A_3|A_1A_2]...P[A_n|A_1...A_{n-1}]$$
14. 独立事件  
如果$A$和$B$相互独立，那么
$$ P[AB] = P[A]P[B] $$
$$ P[A|B] = P[A] \quad if \ P[B]>0$$
$$ P[B|A] = P[B] \quad if \ P[A]>0$$







## 随机变量
1. 随机变量  
一个给定的概率空间($\Omega,\mathcal A, P[\bullet]$),定义随机变量$X$或者写做$X[\bullet]$为一个函数，
它的定义域是$\Omega$,值域是整个实数轴。$X(\bullet)$必须满足，对任何的$A \in \mathcal A$都有实数$r$，
满足$A_r=\{\omega: X(\omega)\leq r\}$。  
我们定义了满足$X(\omega)\leq r$的所有$\omega$集合是一个事件，也就是$\mathcal A$的一个元素，这样我们
就将实验结果同实数集联系起来。可以说，随机变量的定义域是`原始事件`。依然考虑投掷硬币的例子，
$\Omega=\{Head, Tail\}$。当$\omega=Head$时，$X(\omega)=1$; 当$\omega=Tail$时，$X(\omega)=0$。这样，
$r\leq 1$表示全集，$r=-1$表示空集。  
$\Omega$是我们随机实验的完整输出，而随机变量$X$将输出同实数轴联系起来。我们可以用${\omega|X(\omega) \leq r}$
来定义事件，所有在这个集合中的$\omega$都表示一个事件要发生。  
考虑同时投掷两个色子的实验，$\Omega=(i,j)\ i=\{1,2..,6\} \ j=\{1,2..,6\}$。$X$定义为两个朝上面之和的
随机变量，$X(\omega)=i+j \ \omega=(i,j)$; $Y$定义为两个朝上面的绝对值之差，$Y(\omega)=|i-j| \ \omega=(i,j)$。   
2. 累计分布函数  
累计概率分布，将随机变量同$P[\bullet]$联系起来，每个累计分布函数都唯一定义一个随机变量。随机变量X的
累计概率分布函数，用$F_X(\bullet)$来表示。它是一个函数，定义域是实数轴，值域在$[0,1]$之间的函数，满
足对任意实数x, $F_X(x)=P[X \leq x]=P[{\omega: X(\omega) \leq x}]$ 每个累计概率分布函数都唯一定义随机变量。
如果已知累计概率分布，我们就可以预测事件发生的概率。  
举个抛硬币的例子，假设$X$是正面朝上的次数
$$F_X(x) = \begin{cases} 0 \quad x < 0 \\
                         \frac{1}{2} \quad 1 > x \geq 0\\
                         1 \quad 1 \leq x
           \end{cases}$$
3. 离散随机变量    
如果X的输出范围是可数的，那么X是离散随机变量。离散随机变量的累计分布函数也是离散的。
4. 离散随机变量的离散密度函数  
如果X是有$x_1, x_2, ..., x_n, ...$离散随机变量，那么$f_X(\bullet)$就是离散密度函数。
$$f_X(x)=\begin{cases} 
P[X=x_j] \quad x=x_j \\
0 \quad x \neq x_j
\end{cases}$$
随机变量的值也经常被叫做`质点`，$f_X(x_j)$代表了同质点$x_j$关联的`质量`。很明显，
$f_X(\bullet)$和$F_X(\bullet)$之间是微分和积分的关系，它们可以相互推导。
5. 连续随机变量及其概率密度函数  
$$F_X(x)=\int_{-\infty}^xf_X(u)du$$
$$\int_{-\infty}^{+\infty}f_X(u)du=1$$



## 期望,方差和矩
1. 期望  
期望，实际上是概率密度的加权平均。
$$ \xi[X] = \int^{+\infty}_{\infty}xf_X(x)dx$$
$$ \xi[X] = \int^{+\infty}_0[1-F_X(x)]dx - \int^0_{-\infty}F_X(x)dx $$
期望在定义的时候，可以只使用概率分布函数和概率密度函数，所以，我们可以说`某个随机变量的期望`；也可以
说是`某个概率分布的期望`。期望代表了单元质量的"重心"，所以，它会反映随机变量值`中心`的位置。但是，请
注意期望值可以不出现在随机变量结果集中, 也有可能完全不存在，比如是$\infty$。
2. 方差和标准差  
假设$X$是一个随机变量,$\mu_X$就是$\xi[X]$, 那么$X$的方差，$\sigma^2$或者写成var[X]
$$ var[x] = \int_{-\infty}^{+\infty}(x-\mu_X)^2f_X(x)dx$$
$$ var[x] = \int_0^{+\infty}2x[1-F_X(x)+F_X(-x)]dx - \mu_X^2$$
标准差定义为$\sqrt{var[X]}$
3. 随机变量函数的期望值  
假设$X$是一个随机变量，$g(\bullet)$是一个定义域和值域都是实数域的函数。那么
$$\xi[g(X)] = \sum_jg(x_j)f_X(x_j)$$
$$\xi[g(X)] = \int_{-\infty}^{+\infty}g(x)f_X(x)dx$$
如果$g(x)=x$，那么,$\xi[g(X)]=\xi[X]$。如果$g(x)=(x-\mu_x)^2$,那么$\xi[g(X)]=var[X]$
如果c是一个常数函数，
$$\xi[c]=c$$
如果c是一个常数，
$$\xi[cg(X)] = c\xi[g(X)]$$
$$\xi[c_1g_1(X)+c_2g_2(X)] = c_1\xi[g_1(X)] + c_2\xi[g_2(X)]$$
$$if \ g_1(x) \leq g_2(x),\ \ \ \xi[g_1(x)] \leq \xi[g_2(x)]$$
如果X是一个随机变量，
$$var[X]=\xi[(X-\xi[X])^2]=\xi[X^2]-(\xi[X])^2$$
这个等式的证明就利用上式展开就可以了。
4. 切比雪夫不等式和JenSen不等式(略)  
假设X是一个随机变量，$g(\bullet)$是以实数轴为定义域的非负函数，对一切$k > 0$都有
$$ P[g(X) \geq k] \leq \frac{\xi[g(X)]}{k}$$
5. 矩(Moments)  
如果X是随机变量，X的第r矩，使用$\mu_r'$表示
$$\mu_r'=\xi[X^r]$$
$r=1$时，$\mu_1'$就是$\xi[X]$
6. 中心矩(Central Moments)  
如果X是一个随机变量，X的关于a的r阶中心矩定义为$\xi[(X-a)^r]$。如果$a=\mu_{X}$,那么，X关于$\mu_X$的r阶中心
矩是
$$\mu_r=\xi[(X-\mu_X)^r]$$
可以看出来，期望和方差都是`矩`的某个特例。有个比较有意思的比喻，如果将人的一生抽象成一个函数$f(t)$,
一阶矩$\int f(t)dt$，可以用来衡量他的一生得失，是正还是负；二阶矩$\int f^2(t)dt$可以衡量他是否有大起大落[^2]。
一二三四阶矩基本上可以用位置,离散程度，对称性和长尾断尾来形成初步的印象，但是这个直觉并不总是对的。
在数学上[^3]，矩是一种分位的度量。如果度量的对象是质量，那么零阶矩代表总质量，一阶矩是物体的重心位置；
二阶矩是转动惯量。如果度量的对象是概率密度，那么零阶矩是总概率，也就是1；一阶矩是平均数，二阶矩是方差，
三阶矩是`偏度`，四阶矩是`峰度`。一般就是一二阶矩比较重要，高阶矩很少会用到。
7. 矩生成函数（略）  
8. 分位数(Quantile)和中位数(Median)  
随机变量X的q分位数，用$\xi_q$表示，$\xi$是满足$F_X(\xi) \geq q$的最小数。$q=0.5$时，$\xi_{.5}$就是中位数。

## 一元分布族
### 离散分布
1. 离散均匀分布  
离散均匀分布，最简单的例子就是投掷一颗色子，每个面朝上的概率都相等, X表示色子超上面的值。所以，它只
有一个参数N，表示可能输出的个数。均匀分布族中的函数都满足如下性质
$$f(x) = f(x;N) = 
\begin{cases} 
                 \frac{1}{N} \quad & for \ x \in \{1,2,...,N\} \\
                 0 & otherwise
\end{cases}$$
比较容易计算
$$\xi[X] = \sum_{i=1}^{N}i\frac{1}{N} = \frac{N+1}{2}$$
$$var[X] = \xi[X^2]-(\xi[X])^2 = \sum_{j=1}^{N} j^2 \frac{1}{N} - (\frac{N+1}{2})^2 = \frac{N^2-1}{12}$$

2. 伯努利分布  
伯努利分布最简单的例子是投掷一枚不均匀的硬币，硬币以p概率朝上, X表示硬币是否正面朝上。这种实验也被成
为`伯努利实验`, 它只有一个参数p，表示成功的概率。
伯努利分布随机变量X有以下性质
$$f(x) = f(x;p) = 
\begin{cases}
            p^x(1-p)^{1-x} \quad & for\ x \in \{0,1\} \\
            0 & otherwise
\end{cases}$$
比较容易计算
$$\xi[X] = p$$
$$var[X] = pq$$

3. 二项分布  
n次独立的伯努利实验服从`二项分布`，X表示硬币正面朝上的次数，所以，二项分布有两个参数n和p，n表示实验
次数，p表示伯努利实验的成功概率。随机变量X服从二项分布的话，满足如下性质：
$$f(x) = f(x;n,p) = 
\begin{cases}
C_n^xp^x(1-p)^{n-x} \quad & for \ x \in \{0, 1, 2...,n\} \\
0  & otherwise
\end{cases}
$$
我们已知$iC_n^i=n*C_{n-1}^{i-1}$, 比较容易计算$\xi[X]=np$
$$\begin{aligned} \xi[X] &= \sum_{i=0}^n iC_n^ip^i(1-p)^{n-i} \\
                         &= \sum_{i=1}^n iC_n^ip^i(1-p)^{n-i} \\
                         &= pn\sum_{i=1}^{n}C_{n-1}^{i-1}p^{i-1}(1-p)^{n-i} \\
                         &= pn\sum_{i'=0}^{n-1}C_{n-1}^{i'}p^{i'}(1-p)^{n-i'} \\
                         &= np(p+1-p)^{n-1}=np
\end{aligned}$$
方差$var[X]=np(1-p)$

[^1]: Introduction to the theory of statistics. Mood, Alexander
[^2]: 知乎 (概率论中的`矩`有什么含义)question/23236070
[^3]: 维基百科 矩





























